<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #00BFFF, #1E90FF);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .discipline-card {
            background: rgba(255,255,255,0.15);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .discipline-card:hover {
            background: rgba(255,255,255,0.25);
            transform: translateY(-2px);
        }
        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .nav-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .nav-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        .nav-btn.active {
            background: rgba(255,255,255,0.4);
        }
        .hidden {
            display: none;
        }
        .btn-primary {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Å–µ—Å—Å–∏–∏ –ù–ì–¢–£</h1>
            <p>–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è (–ë–ï–ó –∑–∞–≥—Ä—É–∑–∫–∏)</p>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="nav-buttons">
            <button class="nav-btn active" onclick="showPage('dashboard')">üìä Dashboard</button>
            <button class="nav-btn" onclick="showPage('disciplines')">üìö –î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã</button>
            <button class="nav-btn" onclick="showPage('schedule')">üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
            <button class="nav-btn" onclick="showPage('tasks')">‚úÖ –ó–∞–¥–∞—á–∏</button>
            <button class="nav-btn" onclick="showPage('results')">üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
        </div>

        <!-- Dashboard -->
        <div id="dashboard-page" class="page">
            <div class="card">
                <h2>üìä –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</h2>
                <div id="dashboard-content">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>

        <!-- –î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã -->
        <div id="disciplines-page" class="page hidden">
            <div class="card">
                <h2>üìö –ú–æ–∏ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã</h2>
                <div id="disciplines-content">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>

        <!-- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ -->
        <div id="schedule-page" class="page hidden">
            <div class="card">
                <h2>üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏</h2>
                <div id="schedule-content">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>

        <!-- –ó–∞–¥–∞—á–∏ -->
        <div id="tasks-page" class="page hidden">
            <div class="card">
                <h2>‚úÖ –ó–∞–¥–∞—á–∏</h2>
                <div id="tasks-content">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div id="results-page" class="page hidden">
            <div class="card">
                <h2>üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
                <div id="results-content">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="js/data.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/games.js"></script>
    
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            console.log('üöÄ –ó–∞–ø—É—Å–∫ –±—ã—Å—Ç—Ä–æ–π –≤–µ—Ä—Å–∏–∏...');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è storage
            if (typeof StorageManager !== 'undefined') {
                StorageManager.init();
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º dashboard
            loadDashboard();
            loadDisciplines();
            loadSchedule();
            loadTasks();
            loadResults();
            
            console.log('‚úÖ –ë—ã—Å—Ç—Ä–∞—è –≤–µ—Ä—Å–∏—è –≥–æ—Ç–æ–≤–∞!');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
        function showPage(pageName) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.querySelectorAll('.page').forEach(page => {
                page.classList.add('hidden');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            document.getElementById(pageName + '-page').classList.remove('hidden');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // –ó–∞–≥—Ä—É–∑–∏—Ç—å dashboard
        function loadDashboard() {
            try {
                const progress = StorageManager.get(StorageManager.KEYS.PROGRESS);
                const studyTime = StorageManager.get(StorageManager.KEYS.STUDY_TIME);
                
                let html = `
                    <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —Å–µ—Å—Å–∏–∏!</p>
                    <p>üìö –î–∏—Å—Ü–∏–ø–ª–∏–Ω –≤ —Å–∏—Å—Ç–µ–º–µ: ${Object.keys(DISCIPLINES_DATA).length}</p>
                    <p>‚è±Ô∏è –û–±—â–µ–µ –≤—Ä–µ–º—è –∏–∑—É—á–µ–Ω–∏—è: ${Math.round((studyTime?.total || 0) / 60)} —á–∞—Å–æ–≤</p>
                    <p>‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω: ${Object.keys(progress || {}).filter(key => progress[key]?.completed).length}</p>
                `;
                
                document.getElementById('dashboard-content').innerHTML = html;
            } catch (error) {
                document.getElementById('dashboard-content').innerHTML = 
                    `<p style="color: red;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ dashboard: ${error.message}</p>`;
            }
        }

        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã
        function loadDisciplines() {
            try {
                let html = '<div class="dashboard-grid">';
                
                Object.entries(DISCIPLINES_DATA).forEach(([key, disc]) => {
                    if (!disc || !disc.shortName) return;
                    
                    html += `
                        <div class="discipline-card">
                            <h4>${disc.shortName}</h4>
                            <p><strong>${disc.name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</strong></p>
                            <p>–¢–∏–ø: ${disc.examType || 'unknown'}</p>
                            <button class="btn-primary" onclick="alert('–°–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ!')">
                                üöÄ –ò–∑—É—á–∞—Ç—å
                            </button>
                        </div>
                    `;
                });
                
                html += '</div>';
                document.getElementById('disciplines-content').innerHTML = html;
            } catch (error) {
                document.getElementById('disciplines-content').innerHTML = 
                    `<p style="color: red;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω: ${error.message}</p>`;
            }
        }

        // –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
        function loadSchedule() {
            try {
                const schedule = StorageManager.get(StorageManager.KEYS.SCHEDULE) || [];
                
                if (schedule.length === 0) {
                    document.getElementById('schedule-content').innerHTML = '<p>üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—É—Å—Ç–æ. –î–æ–±–∞–≤—å—Ç–µ —ç–∫–∑–∞–º–µ–Ω—ã!</p>';
                } else {
                    let html = '<h3>–ë–ª–∏–∂–∞–π—à–∏–µ —ç–∫–∑–∞–º–µ–Ω—ã:</h3>';
                    schedule.forEach((item, index) => {
                        html += `
                            <div class="discipline-card">
                                <h4>${item.discipline}</h4>
                                <p>üìÖ –î–∞—Ç–∞: ${item.date}</p>
                                <p>‚è∞ –í—Ä–µ–º—è: ${item.time || '–Ω–µ —É–∫–∞–∑–∞–Ω–æ'}</p>
                            </div>
                        `;
                    });
                    document.getElementById('schedule-content').innerHTML = html;
                }
            } catch (error) {
                document.getElementById('schedule-content').innerHTML = 
                    `<p style="color: red;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è: ${error.message}</p>`;
            }
        }

        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–¥–∞—á–∏
        function loadTasks() {
            try {
                const tasks = StorageManager.get(StorageManager.KEYS.TASKS) || { general: [], disciplines: {} };
                
                const generalCount = (tasks.general || []).length;
                const disciplinesCount = Object.values(tasks.disciplines || {}).flat().length;
                
                document.getElementById('tasks-content').innerHTML = `
                    <p>üìã –û–±—â–∏—Ö –∑–∞–¥–∞—á: ${generalCount}</p>
                    <p>üìö –ó–∞–¥–∞—á –ø–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞–º: ${disciplinesCount}</p>
                    <p>‚úÖ –í—Å–µ–≥–æ –∑–∞–¥–∞—á: ${generalCount + disciplinesCount}</p>
                    <button class="btn-primary" onclick="alert('–°–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ!')">
                        ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                `;
            } catch (error) {
                document.getElementById('tasks-content').innerHTML = 
                    `<p style="color: red;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á: ${error.message}</p>`;
            }
        }

        // –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        function loadResults() {
            try {
                const results = StorageManager.get(StorageManager.KEYS.RESULTS) || {};
                const testResults = StorageManager.get(StorageManager.KEYS.TEST_RESULTS) || {};
                
                document.getElementById('results-content').innerHTML = `
                    <p>üèÜ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤: ${Object.keys(testResults).length}</p>
                    <p>üìä –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${Math.max(...Object.values(testResults).map(r => r.score || 0), 0)}%</p>
                    <p>üìà –°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${Math.round(Object.values(testResults).reduce((a, b) => a + (b.score || 0), 0) / Math.max(Object.keys(testResults).length, 1))}%</p>
                `;
            } catch (error) {
                document.getElementById('results-content').innerHTML = 
                    `<p style="color: red;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: ${error.message}</p>`;
            }
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', init);
        
        // –§–æ–ª–±—ç–∫ –µ—Å–ª–∏ DOM —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>