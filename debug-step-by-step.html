<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</title>
    <style>
        body {
            font-family: monospace;
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            margin: 0;
        }
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid #333;
            padding-left: 10px;
        }
        .error {
            background: #330000;
            border-left-color: #ff0000;
        }
        .success {
            background: #003300;
            border-left-color: #00ff00;
        }
        .warning {
            background: #333300;
            border-left-color: #ffff00;
        }
        .step {
            font-weight: bold;
            color: #ffaa00;
        }
        .code {
            background: #000;
            color: #00aaff;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h1>
    <div id="log"></div>

    <script>
        const logContainer = document.getElementById('log');
        
        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `log-entry ${type}`;
            div.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
            logContainer.appendChild(div);
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        log('üöÄ –ù–∞—á–∏–Ω–∞–µ–º –¥–µ—Ç–∞–ª—å–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É...', 'step');

        // –≠—Ç–∞–ø 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ DOM
        log('1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤...', 'step');
        
        function checkDOM() {
            const elements = {
                'loading-screen': document.getElementById('loading-screen'),
                'app': document.getElementById('app'),
                'main-content': document.getElementById('main-content'),
                'page-title': document.getElementById('page-title'),
                'menu-btn': document.getElementById('menu-btn')
            };
            
            for (const [name, element] of Object.entries(elements)) {
                if (element) {
                    log(`‚úÖ ${name}: –Ω–∞–π–¥–µ–Ω`, 'success');
                } else {
                    log(`‚ùå ${name}: –ù–ï –ù–ê–ô–î–ï–ù!`, 'error');
                    return false;
                }
            }
            return true;
        }

        // –≠—Ç–∞–ø 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤
        log('2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤...', 'step');
        
        function checkScripts() {
            const scripts = [
                'js/data.js',
                'js/storage.js', 
                'js/games.js',
                'js/app.js'
            ];
            
            for (const script of scripts) {
                try {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –ª–∏ —Å–∫—Ä–∏–ø—Ç
                    fetch(script)
                        .then(response => response.text())
                        .then(() => log(`‚úÖ ${script}: —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω`, 'success'))
                        .catch(error => log(`‚ùå ${script}: –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ - ${error.message}`, 'error'));
                } catch (error) {
                    log(`‚ùå ${script}: –æ—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ - ${error.message}`, 'error');
                }
            }
        }

        // –≠—Ç–∞–ø 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
        log('3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö...', 'step');
        
        function checkVariables() {
            const variables = [
                'DISCIPLINES_DATA',
                'StorageManager',
                'App'
            ];
            
            for (const variable of variables) {
                if (typeof window[variable] !== 'undefined') {
                    if (variable === 'DISCIPLINES_DATA') {
                        const keys = Object.keys(window[variable]);
                        log(`‚úÖ ${variable}: –Ω–∞–π–¥–µ–Ω, –¥–∏—Å—Ü–∏–ø–ª–∏–Ω: ${keys.length}`, 'success');
                    } else if (variable === 'StorageManager') {
                        log(`‚úÖ ${variable}: –Ω–∞–π–¥–µ–Ω, –∫–ª—é—á–µ–π: ${Object.keys(StorageManager.KEYS).length}`, 'success');
                    } else {
                        log(`‚úÖ ${variable}: –Ω–∞–π–¥–µ–Ω`, 'success');
                    }
                } else {
                    log(`‚ùå ${variable}: –ù–ï –ù–ê–ô–î–ï–ù!`, 'error');
                }
            }
        }

        // –≠—Ç–∞–ø 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ data.js
        log('4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ DISCIPLINES_DATA...', 'step');
        
        function checkDISCIPLINESData() {
            if (typeof DISCIPLINES_DATA === 'undefined') {
                log('‚ùå DISCIPLINES_DATA –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω!', 'error');
                return false;
            }
            
            try {
                const keys = Object.keys(DISCIPLINES_DATA);
                log(`‚úÖ –ù–∞–π–¥–µ–Ω–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω: ${keys.length}`, 'success');
                
                // –ü—Ä–æ–≤–µ—Ä–∏–º –ø–µ—Ä–≤—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω
                for (let i = 0; i < Math.min(3, keys.length); i++) {
                    const key = keys[i];
                    const disc = DISCIPLINES_DATA[key];
                    if (disc && disc.name && disc.shortName) {
                        log(`‚úÖ ${key}: ${disc.shortName}`, 'success');
                    } else {
                        log(`‚ùå ${key}: –Ω–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ`, 'error');
                    }
                }
                
                return true;
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ DISCIPLINES_DATA: ${error.message}`, 'error');
                return false;
            }
        }

        // –≠—Ç–∞–ø 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ StorageManager
        log('5Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ StorageManager...', 'step');
        
        function checkStorageManager() {
            if (typeof StorageManager === 'undefined') {
                log('‚ùå StorageManager –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω!', 'error');
                return false;
            }
            
            try {
                const testKey = 'test_key_' + Date.now();
                StorageManager.set(testKey, { test: true });
                const retrieved = StorageManager.get(testKey);
                
                if (retrieved && retrieved.test === true) {
                    log('‚úÖ StorageManager —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'success');
                    // –û—á–∏—Å—Ç–∏–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
                    localStorage.removeItem(testKey);
                    return true;
                } else {
                    log('‚ùå StorageManager –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'error');
                    return false;
                }
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ StorageManager: ${error.message}`, 'error');
                return false;
            }
        }

        // –≠—Ç–∞–ø 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ init() —Ñ—É–Ω–∫—Ü–∏–∏
        log('6Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ App.init()...', 'step');
        
        function checkInit() {
            if (typeof App === 'undefined' || !App.init) {
                log('‚ùå App.init –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω!', 'error');
                return false;
            }
            
            try {
                log('üîß –ó–∞–ø—É—Å–∫ App.init()...', 'warning');
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º init —Å –æ–±–µ—Ä—Ç–∫–æ–π try-catch
                setTimeout(() => {
                    try {
                        App.init();
                        log('‚úÖ App.init() –∑–∞–ø—É—â–µ–Ω –±–µ–∑ –æ—à–∏–±–æ–∫', 'success');
                        
                        // –ü–æ–¥–æ–∂–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ –∏ –ø—Ä–æ–≤–µ—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                        setTimeout(() => {
                            const loadingScreen = document.getElementById('loading-screen');
                            const app = document.getElementById('app');
                            
                            if (loadingScreen && loadingScreen.style.display === 'none') {
                                log('‚úÖ –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä—ã—Ç', 'success');
                            } else {
                                log('‚ùå –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ –µ—â–µ –≤–∏–¥–∏–º—ã–π!', 'error');
                            }
                            
                            if (app && app.style.display === 'flex') {
                                log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞–Ω–æ', 'success');
                            } else {
                                log('‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–æ–∫–∞–∑–∞–Ω–æ!', 'error');
                            }
                        }, 2000);
                        
                    } catch (error) {
                        log(`‚ùå –û—à–∏–±–∫–∞ –≤ App.init(): ${error.message}`, 'error');
                        log(`Stack: ${error.stack}`, 'error');
                    }
                }, 1000);
                
                return true;
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ App.init(): ${error.message}`, 'error');
                return false;
            }
        }

        // –≠—Ç–∞–ø 7: –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
        log('7Ô∏è‚É£ –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤...', 'step');
        
        function testComponents() {
            try {
                // –ü—Ä–æ–≤–µ—Ä–∏–º renderDashboard
                if (App && App.renderDashboard) {
                    const dashboardHtml = App.renderDashboard();
                    if (dashboardHtml && dashboardHtml.length > 0) {
                        log('‚úÖ App.renderDashboard() —Ä–∞–±–æ—Ç–∞–µ—Ç', 'success');
                    } else {
                        log('‚ùå App.renderDashboard() –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç', 'error');
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∏–º loadPage
                if (App && App.loadPage) {
                    try {
                        App.loadPage('dashboard');
                        log('‚úÖ App.loadPage("dashboard") —Ä–∞–±–æ—Ç–∞–µ—Ç', 'success');
                    } catch (error) {
                        log(`‚ùå –û—à–∏–±–∫–∞ App.loadPage(): ${error.message}`, 'error');
                    }
                }
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: ${error.message}`, 'error');
            }
        }

        // –ó–∞–ø—É—Å–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
        async function runDiagnostics() {
            log('–ù–∞—á–∏–Ω–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É...', 'step');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º DOM —Å—Ä–∞–∑—É
            if (!checkDOM()) {
                log('‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: DOM —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã!', 'error');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∫—Ä–∏–ø—Ç—ã (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
            checkScripts();
            
            // –î–∞–µ–º –≤—Ä–µ–º—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤
            setTimeout(() => {
                checkVariables();
                checkDISCIPLINESData();
                checkStorageManager();
                checkInit();
            }, 2000);
            
            setTimeout(() => {
                testComponents();
                log('üèÅ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!', 'step');
            }, 5000);
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
        runDiagnostics();
    </script>
</body>
</html>