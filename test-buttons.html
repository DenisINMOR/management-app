<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–Ω–æ–ø–æ–∫</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #f5f5f5;
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            background: white; 
            padding: 20px; 
            border-radius: 10px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section { 
            margin: 20px 0; 
            padding: 20px; 
            border: 1px solid #ddd; 
            border-radius: 8px; 
        }
        .btn { 
            padding: 12px 24px; 
            margin: 5px; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer; 
            font-size: 14px;
        }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-warning { background: #ffc107; color: black; }
        .log { 
            background: #f8f9fa; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 5px; 
            font-family: monospace; 
            max-height: 200px; 
            overflow-y: auto;
        }
        .status { 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 5px; 
        }
        .status.success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .status.error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–Ω–æ–ø–æ–∫ –∏ JavaScript</h1>
        
        <div class="test-section">
            <h2>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ JavaScript</h2>
            <button class="btn btn-primary" onclick="testJS()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å JavaScript</button>
            <div id="js-status" class="status"></div>
        </div>

        <div class="test-section">
            <h2>2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤</h2>
            <button class="btn btn-primary" onclick="testGlobals()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã</button>
            <div id="globals-status" class="status"></div>
        </div>

        <div class="test-section">
            <h2>3. –¢–µ—Å—Ç –∫–Ω–æ–ø–∫–∏ "–¢–µ—Å—Ç"</h2>
            <button class="btn btn-success" onclick="testButton('test')">–ö–ª–∏–∫–Ω—É—Ç—å "–¢–µ—Å—Ç"</button>
            <div id="test-status" class="status"></div>
        </div>

        <div class="test-section">
            <h2>4. –¢–µ—Å—Ç –∫–Ω–æ–ø–∫–∏ "–ó–∞—á–µ—Ç"</h2>
            <button class="btn btn-warning" onclick="testButton('credit')">–ö–ª–∏–∫–Ω—É—Ç—å "–ó–∞—á–µ—Ç"</button>
            <div id="credit-status" class="status"></div>
        </div>

        <div class="test-section">
            <h2>5. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞</h2>
            <p>–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤.</p>
            <button class="btn btn-danger" onclick="clearLogs()">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
        </div>

        <div class="test-section">
            <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</h2>
            <div id="results" class="log"></div>
        </div>
    </div>

    <script>
        let results = [];
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const entry = `[${timestamp}] ${message}`;
            results.push(entry);
            document.getElementById('results').innerHTML = results.join('<br>');
            console.log(entry);
        }

        function updateStatus(id, message, isError = false) {
            const element = document.getElementById(id);
            element.className = `status ${isError ? 'error' : 'success'}`;
            element.innerHTML = message;
            log(`${id}: ${message}`, isError ? 'error' : 'success');
        }

        function testJS() {
            try {
                log('üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç JavaScript...');
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
                const testObj = { test: true };
                const testArray = [1, 2, 3];
                
                if (testObj.test && testArray.length === 3) {
                    updateStatus('js-status', '‚úÖ JavaScript —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!', false);
                } else {
                    updateStatus('js-status', '‚ùå JavaScript –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!', true);
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ DOM
                if (document.getElementById) {
                    updateStatus('js-status', '‚úÖ JavaScript —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! DOM –¥–æ—Å—Ç—É–ø–µ–Ω.', false);
                } else {
                    updateStatus('js-status', '‚ùå DOM –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω!', true);
                }
                
            } catch (error) {
                updateStatus('js-status', `‚ùå –û—à–∏–±–∫–∞ JavaScript: ${error.message}`, true);
                log(`‚ùå JavaScript –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        function testGlobals() {
            try {
                log('üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã...');
                
                let status = [];
                status.push(`<strong>–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã:</strong><br>`);
                status.push(`window: ${typeof window === 'undefined' ? '‚ùå –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω' : '‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω'}<br>`);
                status.push(`console: ${typeof console === 'undefined' ? '‚ùå –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω' : '‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω'}<br>`);
                status.push(`document: ${typeof document === 'undefined' ? '‚ùå –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω' : '‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω'}<br>`);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
                status.push(`<br><strong>–ü—Ä–æ–≤–µ—Ä—è–µ–º —É—á–µ–±–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:</strong><br>`);
                
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –æ–±—ä–µ–∫—Ç—ã —É—á–µ–±–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                if (typeof window.App === 'undefined') {
                    window.App = {
                        startFinalTest: function(disciplineId) {
                            log(`üìö startFinalTest –≤—ã–∑–≤–∞–Ω –¥–ª—è: ${disciplineId}`);
                            alert(`‚úÖ –§—É–Ω–∫—Ü–∏—è startFinalTest —Ä–∞–±–æ—Ç–∞–µ—Ç! –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞: ${disciplineId}`);
                        },
                        loadDiscipline: function(id) {
                            log(`üìñ loadDiscipline –≤—ã–∑–≤–∞–Ω –¥–ª—è: ${id}`);
                            alert(`‚úÖ –§—É–Ω–∫—Ü–∏—è loadDiscipline —Ä–∞–±–æ—Ç–∞–µ—Ç! ID: ${id}`);
                        }
                    };
                    status.push(`window.App: ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∏–º—É–ª—è—Ç–æ—Ä<br>`);
                } else {
                    status.push(`window.App: ‚úÖ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç<br>`);
                }
                
                if (typeof window.TestManager === 'undefined') {
                    window.TestManager = {};
                    status.push(`window.TestManager: ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∏–º—É–ª—è—Ç–æ—Ä<br>`);
                } else {
                    status.push(`window.TestManager: ‚úÖ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç<br>`);
                }
                
                updateStatus('globals-status', status.join(''), false);
                
            } catch (error) {
                updateStatus('globals-status', `‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤: ${error.message}`, true);
                log(`‚ùå –û—à–∏–±–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤: ${error.message}`, 'error');
            }
        }

        function testButton(type) {
            try {
                log(`üñ±Ô∏è –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É: ${type}`);
                
                if (type === 'test') {
                    // –°–∏–º—É–ª–∏—Ä—É–µ–º –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "–¢–µ—Å—Ç"
                    const disciplineId = 'hr_management';
                    log(`üìù –í—ã–∑—ã–≤–∞–µ–º App.startFinalTest('${disciplineId}')`);
                    
                    if (window.App && typeof window.App.startFinalTest === 'function') {
                        window.App.startFinalTest(disciplineId);
                        updateStatus('test-status', `‚úÖ –ö–Ω–æ–ø–∫–∞ "–¢–µ—Å—Ç" —Ä–∞–±–æ—Ç–∞–µ—Ç! –í—ã–∑–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è startFinalTest('${disciplineId}')`, false);
                    } else {
                        updateStatus('test-status', `‚ùå –§—É–Ω–∫—Ü–∏—è App.startFinalTest –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!`, true);
                    }
                } else if (type === 'credit') {
                    // –°–∏–º—É–ª–∏—Ä—É–µ–º –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "–ó–∞—á–µ—Ç"
                    log(`üìù –°–∏–º—É–ª–∏—Ä—É–µ–º –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "–ó–∞—á–µ—Ç/–≠–∫–∑–∞–º–µ–Ω"`);
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–ø–µ –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–∏
                    const examTypes = {
                        'hr_management': '–≠–ö–ó–ê–ú–ï–ù',
                        'lean_manufacturing': '–ó–ê–ß–ï–¢',
                        'internet_marketing': '–≠–ö–ó–ê–ú–ï–ù'
                    };
                    
                    const selectedDiscipline = 'hr_management';
                    const examType = examTypes[selectedDiscipline] || '–ó–ê–ß–ï–¢';
                    
                    alert(`üìù –¢–∏–ø –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–∏ –¥–ª—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã "${selectedDiscipline}": ${examType}`);
                    updateStatus('credit-status', `‚úÖ –ö–Ω–æ–ø–∫–∞ "–ó–∞—á–µ—Ç/–≠–∫–∑–∞–º–µ–Ω" —Ä–∞–±–æ—Ç–∞–µ—Ç! –¢–∏–ø –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–∏: ${examType}`, false);
                }
                
            } catch (error) {
                const errorMsg = `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏ ${type}: ${error.message}`;
                updateStatus(`${type}-status`, errorMsg, true);
                log(errorMsg, 'error');
            }
        }

        function clearLogs() {
            results = [];
            document.getElementById('results').innerHTML = '';
            log('üßπ –õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã');
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', function() {
            log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –Ω–∞—á–∏–Ω–∞–µ–º –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã...');
            setTimeout(() => {
                testJS();
                testGlobals();
            }, 500);
        });
    </script>
</body>
</html>